var FormularioDetalleControllerBase={InyectarDependencia:function(a,b,c){Ext.apply(a,{permisos:null,params:{modeloEntidad:b,nombreEntidad:"",anchoVentana:0,altoVentana:0},ctl:{},registro:null});Ext.apply(a.getView(),{paramsEntrada:{modelo:null},datosRetorno:{modelo:null,accion:null}});a.permisos=sesionUsuario.GetPermiso(c);a.esNuevo=false;ControllerBase.InyectarDependencia(a);a.onRender=this.onRender;a.onBtnBorrarClick=this.onBtnBorrarClick;a.onBtnGuardarClick=this.onBtnGuardarClick;a.IntentarCerrarVentanaContenedora=this.IntentarCerrarVentanaContenedora;a.ConfigurarPantalla=this.ConfigurarPantalla;a.GetComponenteFoco=this.GetComponenteFoco;a.SetearParametrosFormulario(a);a.CargarComponentes()},onRender:function(a){this.ConfigurarPantalla()},onBtnBorrarClick:function(c,d,a){var b,c;b=this.getView();c=this;Ext.MessageBox.confirm("Borrar","Esta seguro de que desea borrar el registro?",function(e){if(e==="yes"){b.datosRetorno.accion=AccionRetorno.Borrar;b.datosRetorno.modelo=c.ObtenerRegistroDeFormulario();c.IntentarCerrarVentanaContenedora()}})},onBtnGuardarClick:function(d,f,b){var c=this.getView();var a;if(c.isValid()){if(c.paramsEntrada.modelo==null){c.datosRetorno.accion=AccionRetorno.Crear}else{c.datosRetorno.accion=AccionRetorno.Actualizar}a=this.ObtenerRegistroDeFormulario();if(a!=null){c.datosRetorno.modelo=a;this.IntentarCerrarVentanaContenedora()}}},GetComponenteFoco:function(){return this.getView().down(this.GetElementoFoco())},ConfigurarPantalla:function(){var a;a=this.getView();if(a.paramsEntrada.modelo==null){this.esNuevo=true;this.CargarRegistroEnFormulario(Ext.create(this.params.modeloEntidad,{}),this.esNuevo);a.down("button[name='btnBorrar']").disable()}else{this.CargarRegistroEnFormulario(a.paramsEntrada.modelo,false)}},IntentarCerrarVentanaContenedora:function(){var a=this.getView().up("window");if(a!=null){a.close()}}};